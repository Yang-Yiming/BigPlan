#:schema node_modules/wrangler/config-schema.json
name = "bigplans"
main = "src/server/index.ts"
compatibility_date = "2024-12-01"
node_compat = true

[observability]
enabled = true

# 开发环境数据库
[[d1_databases]]
binding = "DB"
database_name = "bigplans-db"
database_id = ""

# 生产环境数据库配置（在生产环境中取消注释并填入实际 database_id）
# [[d1_databases]]
# binding = "DB"
# database_name = "bigplans-db-prod"
# database_id = "your-production-database-id"

# 开发环境变量
[vars]
ENVIRONMENT = "development"

# 生产环境配置（使用 wrangler secret 设置敏感信息）
[env.production]
name = "bigplans-prod"
compatibility_date = "2024-12-01"
node_compat = true

[env.production.observability]
enabled = true

[[env.production.d1_databases]]
binding = "DB"
database_name = "bigplans-db-prod"
database_id = "" # 填入生产环境数据库 ID

[env.production.vars]
ENVIRONMENT = "production"

# 使用以下命令设置生产环境密钥：
# wrangler secret put JWT_SECRET --env production

# 路由配置（生产环境）
# [env.production.routes]
# pattern = "api.bigplans.com/*"
# zone_name = "bigplans.com"

